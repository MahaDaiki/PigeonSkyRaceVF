<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <h3>Pigeon Dashboard</h3>
      <form [formGroup]="pigeonForm" (ngSubmit)="addPigeon()">
        <div class="mb-3">
          <label for="numeroBague" class="form-label">Numero Bague</label>
          <input
            type="text"
            class="form-control"
            id="numeroBague"
            formControlName="numeroBague"
            required
          />
          <div *ngIf="pigeonForm.get('numeroBague')?.invalid && pigeonForm.get('numeroBague')?.touched" class="text-danger">
            Numero Bague must start with 'm' or 'f' (lowercase) and is required.
          </div>
        </div>
        <div class="mb-3">
          <label for="couleur" class="form-label">Couleur</label>
          <input
            type="text"
            class="form-control"
            id="couleur"
            formControlName="couleur"
            required
          />
          <div *ngIf="pigeonForm.get('couleur')?.invalid && pigeonForm.get('couleur')?.touched" class="text-danger">
            Couleur is required.
          </div>
        </div>
        <div class="mb-3">
          <label for="age" class="form-label">Age</label>
          <input
            type="number"
            class="form-control"
            id="age"
            formControlName="age"
            required
          />
          <div *ngIf="pigeonForm.get('age')?.invalid && pigeonForm.get('age')?.touched" class="text-danger">
            Age is required and must be a positive number.
          </div>
        </div>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="pigeonForm.invalid || !isAuthenticated"
        >
          Add Pigeon
        </button>
      </form>

      <!-- Success and Error Messages -->
      <div *ngIf="successMessage" class="alert alert-success mt-3" data-testid="success-message">
        {{ successMessage }}
      </div>
      <div *ngIf="errorMessage" class="alert alert-danger mt-3" data-testid="error-message">
        {{ errorMessage }}
      </div>
    </div>

    <div class="col-md-6">
      <h4>Existing Pigeons</h4>
      <div class="row" data-testid="pigeons-list">
        <div *ngFor="let pigeon of pigeons" class="col-md-6 mb-3">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">{{ pigeon.numeroBague }}</h5>
              <p class="card-text">
                Couleur: {{ pigeon.couleur }}<br>
                Age: {{ pigeon.age }} years old
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
